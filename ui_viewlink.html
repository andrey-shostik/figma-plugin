<h2>TEST</h2>
<div id="main"></div>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
  integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>

<script>
  onmessage = (event) => {
    const link = event.data.pluginMessage;
  console.log("got this from the plugin code", event.data.pluginMessage)
  run(link);
}
  // const LINK = "http://localhost:3000/";

  const fetchPage = async (link) => {
    try {
      const response = await axios(link);
      console.log(response.data, "response");
      return response.data;
    } catch (e) {
      console.log("e", e);
    }
  };

  const run = async (link) => {
    const page = await fetchPage(link);
    const div = document.querySelector("#main");
    div.innerHTML = page;
  };
  // run();
</script>
